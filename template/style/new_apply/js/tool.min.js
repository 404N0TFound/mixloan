(function(){function v(b,a){for(var c in a)b.setAttribute(c,a[c])}function m(b,a){b.onload=function(){this.onerror=this.onload=null;a(null,b)};b.onerror=function(){this.onerror=this.onload=null;a(Error("Failed to load "+this.src),b)}}function w(b,a){b.onreadystatechange=function(){if("complete"==this.readyState||"loaded"==this.readyState)this.onreadystatechange=null,a(null,b)}}function n(){}function q(b,a,c){for(var e in a)!a.hasOwnProperty(e)||void 0!==b[e]&&!0!==c||(b[e]=a[e]);return b}function r(b,
a,c){var e=function(a){return a.replace(/(^\/)|(\/$)/g,"")};a=e(a.replace(/^https?:\/\//i,""));return(c=c?e(c):"")?b+"://"+a+"/"+c:b+"://"+a}function x(b,a,c){function e(){k.parentNode&&k.parentNode.removeChild(k);window[f]=n;l&&clearTimeout(l)}"function"===typeof a&&(c=a,a={});a||(a={});var d=a.prefix||"__jp",f=a.name||d+y++,d=a.param||"cb",g=null!=a.timeout?a.timeout:6E4;a=encodeURIComponent;var h=document.getElementsByTagName("script")[0]||document.head,k,l;g&&(l=setTimeout(function(){e();c&&c(Error("Timeout"))},
g));window[f]=function(a){e();c&&c(null,a)};g=(new Date).getTime();b+=(~b.indexOf("?")?"\x26":"?")+d+"\x3d"+a(f)+"\x26t\x3d"+g;b=b.replace("?\x26","?");k=document.createElement("script");k.src=b;h.parentNode.insertBefore(k,h);return function(){window[f]&&e()}}function z(b){try{var a=localStorage.getItem(b).split(p);if(+a.splice(-1)>=t())return a.join(p);localStorage.removeItem(b);return""}catch(c){return""}}function A(b,a){var c=b.pn,e=b.protocol,d=b.timeout,f=b.__serverConfig__;void 0===f&&(f={});
c=r(e,f.configServer||"ac.dun.163yun.com","/v2/config/js?pn\x3d"+c);x(c,{timeout:d},a)}function u(b,a,c){var e=b.pn,d=b.productNumber;if(!e&&!d)throw Error("[NEWatchman] required product number");var f=location.protocol.replace(":","");b=q(q({onload:a,onerror:c},b),{protocol:f,auto:!0,onload:n,onerror:n,timeout:0,pn:e||d});B(b)}var C=function(b,a,c){var e=document.head||document.getElementsByTagName("head")[0],d=document.createElement("script");"function"===typeof a&&(c=a,a={});a=a||{};c=c||function(){};
d.type=a.type||"text/javascript";d.charset=a.charset||"utf8";d.async="async"in a?!!a.async:!0;d.src=b;a.attrs&&v(d,a.attrs);a.text&&(d.text=""+a.text);("onload"in d?m:w)(d,c);d.onload||m(d,c);e.appendChild(d)},y=0,p=",",t=function(b){void 0===b&&(b=0);return(new Date).getTime()+parseInt(b,10)},B=function(b){function a(a,b){var c=a.protocol,g=a.onerror,h=a.__serverConfig__;void 0===h&&(h={});var k=a.attrs;void 0===k&&(k={});var l=b.split(","),n=l[0],p=l[1],m=l[2],h=q({configHash:m,sConfig:m,staticServer:h.staticServer||
n,apiServer:h.apiServer||p,buildVersion:l[3]},a),l=h.buildVersion+"/watchman.min",c=r(c,h.staticServer)+"/"+l+".js";window.WM_CONFIG=h;C(c,{charset:"UTF-8",attrs:k},function(a){if(a)return g("[NEWatchman] load js file error")})}var c=z("wm_cf");c?a(b,c):A(b,function(c,d){var f=b.onerror;if(c)return f(Error("[NEWatchman] fetch config timeout"));if(d&&200===d.code){var g=d.result,f=g.ivp,g=[g.s,g.as,g.conf,g.v].join();try{var h=t(f);localStorage.setItem("wm_cf",g+p+h)}catch(k){}a(b,g)}else f(Error("[NEWatchman] fetch config error"))})};
u.version=1;window.initWatchman=window.initNEWatchman=u})();